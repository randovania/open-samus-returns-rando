{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "properties": {
        "starting_location": {
            "$ref": "#/$defs/actor_reference"
        },
        "starting_items": {
            "type": "object",
            "propertyNames": {
                "$ref": "#/$defs/item_id"
            },
            "required": [
                "ITEM_MAX_LIFE",
                "ITEM_MAX_SPECIAL_ENERGY",
                "ITEM_WEAPON_MISSILE_MAX",
                "ITEM_WEAPON_SUPER_MISSILE_MAX",
                "ITEM_WEAPON_POWER_BOMB_MAX",
                "ITEM_METROID_COUNT",
                "ITEM_METROID_TOTAL_COUNT"
            ]
        },
        "pickups": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "pickup_type": {
                        "type": "string"
                    },
                    "caption": {
                        "type": "string"
                    },
                    "pickup_actor": {
                        "$ref": "#/$defs/actor_reference_with_layer"
                    },
                    "model": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "minItems": 1,
                        "description": "A list of model identifiers used by this pickup. Non-progressive items will only have one model identifier."
                    },
                    "resources": {
                        "type": "array",
                        "items": {
                            "type": "array",
                            "items": {
                                "$ref": "#/$defs/item"
                            },
                            "minItems": 1,
                            "description": "An array of all resources that will be gained from a particular stage of progression."
                        },
                        "minItems": 1,
                        "description": "An array of arrays representing progressive item stages and resource gains for each stage.",
                        "examples": [
                            [
                                [
                                    { "item_id": "ITEM_WEAPON_WAVE_BEAM", "quantity": 1 }
                                ],
                                [
                                    { "item_id": "ITEM_WEAPON_SPAZER_BEAM", "quantity": 1 }
                                ],
                                [
                                    { "item_id": "ITEM_WEAPON_PLASMA_BEAM", "quantity": 1 }
                                ]
                            ],
                            [
                                [
                                    { "item_id": "ITEM_WEAPON_POWER_BOMB", "quantity": 1 },
                                    { "item_id": "ITEM_WEAPON_POWER_BOMB_MAX", "quantity": 2 }
                                ]
                            ]
                        ]
                    }
                },
                "required": [
                    "pickup_type",
                    "caption",
                    "resources",
                    "pickup_actor",
                    "model"
                ]
            }
        },
        "elevators": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "teleporter": {
                        "$ref": "#/$defs/actor_reference_with_layer"
                    },
                    "destination": {
                        "$ref": "#/$defs/actor_reference"
                    }
                },
                "required": [
                    "teleporter",
                    "destination"
                ]
            }
        },
        "energy_per_tank": {
            "description": "How much energy collecting an Energy Tank gives",
            "type": "number",
            "default": 100.0
        },
        "aeion_per_tank": {
            "description": "How much aeion collecting an Aeion Tank gives",
            "type": "number",
            "default": 50.0
        },
        "reveal_map_on_start": {
            "type": "boolean",
            "default": false,
            "description": "When true, the game will start with the whole map revealed"
        },
        "game_patches": {
            "type": "object",
            "properties": {
                "nerf_power_bombs": {
                    "type": "boolean",
                    "description": "Changes weaknesses for certain props to make Power Bombs less overpowered.",
                    "default": true
                },
                "remove_elevator_grapple_blocks": {
                    "type": "boolean",
                    "description": "Remove the Grapple Blocks in the exit paths to the connecting areas.",
                    "default": true
                },
                "remove_grapple_block_area3_interior_shortcut": {
                    "type": "boolean",
                    "description": "Remove the Grapple Block in the path to Area 3 Interior (West) from Area 3 Interior (East).",
                    "default": false
                },
                "nerf_super_missiles": {
                    "type": "boolean",
                    "description": "Removes the Super Missile weakness on Missile shields.",
                    "default": false
                }
            },
            "additionalProperties": false
        },
        "new_spawn_points": {
            "type": "array",
            "description": "Creates new spawn points",
            "items": {
                "type": "object",
                "properties": {
                    "new_actor": {
                        "$ref": "#/$defs/actor_reference"
                    },
                    "location": {
                        "$ref": "#/$defs/position"
                    },
                    "collision_camera_name": {
                        "type": "string"
                    }
                },
                "required": [
                    "new_actor",
                    "location",
                    "collision_camera_name"
                ],
                "additionalProperties": false
            },
            "default": []
        },
        "custom_pickups": {
            "type": "array",
            "description": "Creates new pickups",
            "items": {
                "type": "object",
                "properties": {
                    "new_actor": {
                        "$ref": "#/$defs/actor_reference"
                    },
                    "location": {
                        "$ref": "#/$defs/position"
                    },
                    "collision_camera_name": {
                        "type": "string"
                    }
                },
                "required": [
                    "new_actor",
                    "location",
                    "collision_camera_name"
                ],
                "additionalProperties": false
            },
            "default": []
        }
    },
    "required": [
        "starting_location",
        "starting_items",
        "pickups"
    ],
    "$defs": {
        "actor_reference_with_layer": {
            "type": "object",
            "properties": {
                "scenario": {
                    "$ref": "#/$defs/scenario_name"
                },
                "layer": {
                    "type": "string",
                    "default": "default"
                },
                "actor": {
                    "type": "string"
                }
            },
            "required": [
            ]
        },
        "actor_reference": {
            "type": "object",
            "properties": {
                "scenario": {
                    "$ref": "#/$defs/scenario_name"
                },
                "actor": {
                    "type": "string"
                }
            },
            "required": [
            ]
        },
        "scenario_name": {
            "type": "string",
            "enum": [
                "s000_surface",
                "s010_area1",
                "s020_area2",
                "s025_area2b",
                "s028_area2c",
                "s030_area3",
                "s033_area3b",
                "s036_area3c",
                "s040_area4",
                "s050_area5",
                "s060_area6",
                "s065_area6b",
                "s067_area6c",
                "s070_area7",
                "s090_area9",
                "s100_area10",
                "s110_surfaceb"
            ]
        },
        "item_id": {
            "type": "string",
            "enum": [
                "ITEM_NONE",
                "ITEM_MAX_LIFE",
                "ITEM_MAX_SPECIAL_ENERGY",
                "ITEM_WEAPON_MISSILE_MAX",
                "ITEM_WEAPON_SUPER_MISSILE_MAX",
                "ITEM_WEAPON_POWER_BOMB_MAX",
                "ITEM_WEAPON_ICE_BEAM",
                "ITEM_WEAPON_WAVE_BEAM",
                "ITEM_WEAPON_SPAZER_BEAM",
                "ITEM_WEAPON_PLASMA_BEAM",
                "ITEM_WEAPON_CHARGE_BEAM",
                "ITEM_WEAPON_GRAPPLE_BEAM",
                "ITEM_WEAPON_SUPER_MISSILE",
                "ITEM_SPECIAL_ENERGY_SCANNING_PULSE",
                "ITEM_SPECIAL_ENERGY_ENERGY_SHIELD",
                "ITEM_SPECIAL_ENERGY_ENERGY_WAVE",
                "ITEM_SPECIAL_ENERGY_PHASE_DISPLACEMENT",
                "ITEM_VARIA_SUIT",
                "ITEM_GRAVITY_SUIT",
                "ITEM_MORPH_BALL",
                "ITEM_WEAPON_BOMB",
                "ITEM_SPIDER_BALL",
                "ITEM_SPRING_BALL",
                "ITEM_WEAPON_POWER_BOMB",
                "ITEM_HIGH_JUMP_BOOTS",
                "ITEM_SPACE_JUMP",
                "ITEM_SCREW_ATTACK",
                "ITEM_BABY_HATCHLING",
                "ITEM_ENERGY_TANKS",
                "ITEM_AEION_TANKS",
                "ITEM_METROID_COUNT",
                "ITEM_METROID_TOTAL_COUNT",
                "ITEM_ADN",
                "ITEM_RANDO_LOCKED_SUPERS",
                "ITEM_RANDO_LOCKED_PBS"
            ]
        },
        "item": {
            "type": "object",
            "properties": {
                "item_id": {
                    "$ref": "#/$defs/item_id"
                },
                "quantity": {
                    "type": "number"
                }
            },
            "required": [
                "item_id",
                "quantity"
            ],
            "additionalProperties": false
        },
        "position": {
            "type": "object",
            "properties": {
                "x": {
                    "type": "number"
                },
                "y": {
                    "type": "number"
                },
                "z": {
                    "type": "number"
                }
            },
            "required": [
                "x",
                "y",
                "z"
            ]
        }
    }
}
